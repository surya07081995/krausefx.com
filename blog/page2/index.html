<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>
    
      Felix Krause
    
  </title>
  
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="alternate" type="application/rss+xml" title="Felix Krause" href="/feed.xml">
  
    <script>
  // Google Analytics
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-18658848-6', 'auto');
  ga('set', 'anonymizeIp', true)
  ga('send', 'pageview');
</script>
  
<script type="text/javascript">
  // amplitude.com
  (function(e,t){var n=e.amplitude||{_q:[],_iq:{}};var r=t.createElement("script")
  ;r.type="text/javascript";r.async=true
  ;r.src="https://cdn.amplitude.com/libs/amplitude-3.8.0-min.gz.js"
  ;r.onload=function(){if(e.amplitude.runQueuedFunctions){
  e.amplitude.runQueuedFunctions()}else{
  console.log("[Amplitude] Error: could not load SDK")}}
  ;var i=t.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i)
  ;function s(e,t){e.prototype[t]=function(){
  this._q.push([t].concat(Array.prototype.slice.call(arguments,0)));return this}}
  var o=function(){this._q=[];return this}
  ;var a=["add","append","clearAll","prepend","set","setOnce","unset"]
  ;for(var u=0;u<a.length;u++){s(o,a[u])}n.Identify=o;var c=function(){this._q=[]
  ;return this}
  ;var l=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"]
  ;for(var p=0;p<l.length;p++){s(c,l[p])}n.Revenue=c
  ;var d=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","logEventWithTimestamp","logEventWithGroups","setSessionId"]
  ;function v(e){function t(t){e[t]=function(){
  e._q.push([t].concat(Array.prototype.slice.call(arguments,0)))}}
  for(var n=0;n<d.length;n++){t(d[n])}}v(n);n.getInstance=function(e){
  e=(!e||e.length===0?"$default_instance":e).toLowerCase()
  ;if(!n._iq.hasOwnProperty(e)){n._iq[e]={_q:[]};v(n._iq[e])}return n._iq[e]}
  ;e.amplitude=n})(window,document);

  amplitude.getInstance().init("d29e6b5f160e55c2afe7aadafda39507");
  amplitude.getInstance().logEvent('PAGE_VIEW');
</script>
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    <a class="site-title" href="/">Felix Krause</a>
  
    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger">
        <span class="menu-icon">
          <svg viewBox="0 0 18 15" width="18px" height="15px">
            <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
            <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
            <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
          </svg>
        </span>
      </label>

      <div class="trigger">
        <a href="/" class="page-link active">Blog</a>
        <a href="/privacy" class="page-link ">Privacy</a>
        <a href="/about" class="page-link ">About</a>
      </div>
    </nav>
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div id="sidebar">
  <h1 style="font-size: 21px;">Felix Krause</h1>
  <p>Founder of <a href="https://fastlane.tools" target="_blank">fastlane.tools</a></p>
  <p><a href="/about">More about me</a></p>
  <img src="/assets/FelixKrause.jpeg" width="180" />

  <!-- Social links -->
  <ul class="social-media-list" style="margin-top: 20px; margin-bottom: 30px;">
    <li>
      <a href="https://github.com/KrauseFx" target="_blank"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">KrauseFx</span></a>

    </li>
    <li>
      <a href="https://twitter.com/KrauseFx" target="_blank"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">KrauseFx</span></a>

    </li>
    <li>
      <a href="https://www.linkedin.com/in/KrauseFx"><span class="icon icon--linked"><svg width="16px" height="16px" viewBox="0 0 430.117 430.117" xml:space="preserve"><path id="LinkedIn" fill="#828282" d="M430.117,261.543V420.56h-92.188V272.193c0-37.271-13.334-62.707-46.703-62.707 c-25.473,0-40.632,17.142-47.301,33.724c-2.432,5.928-3.058,14.179-3.058,22.477V420.56h-92.219c0,0,1.242-251.285,0-277.32h92.21 v39.309c-0.187,0.294-0.43,0.611-0.606,0.896h0.606v-0.896c12.251-18.869,34.13-45.824,83.102-45.824 C384.633,136.724,430.117,176.361,430.117,261.543z M52.183,9.558C20.635,9.558,0,30.251,0,57.463 c0,26.619,20.038,47.94,50.959,47.94h0.616c32.159,0,52.159-21.317,52.159-47.94C103.128,30.251,83.734,9.558,52.183,9.558z M5.477,420.56h92.184v-277.32H5.477V420.56z"/></svg>
</span><span class="username">KrauseFx</span></a>

    </li>
  </ul>

  <hr />

  <p class="subscribe-newsletter">
  Want to be the first to hear about more privacy and mobile related essays?
</p>

<form class="subscribe-form" action="https://krausefx.us10.list-manage.com/subscribe/post?u=a84ca3495977afb89bf2b98fb&amp;id=d9610c8987" method="post" target="popupwindow" onsubmit="window.open('https://krausefx.us10.list-manage.com/subscribe/post?u=a84ca3495977afb89bf2b98fb', 'popupwindow', 'scrollbars=yes,width=600,height=620');return true">
  <label for="tlemail"></label>
  <input type="text" placeholder="Email Address" name="EMAIL" id="tlemail">
  <input type="hidden" value="1" name="embed">
  <button type="submit" name="subscribe">
    Subscribe
  </button>
</form>


  <hr />

  <div class='jekyll-twitter-plugin'><a class="twitter-timeline" data-width="500" data-tweet-limit="5" href="https://twitter.com/KrauseFx?ref_src=twsrc%5Etfw">Tweets by KrauseFx</a>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>

</div>


        <div class="home">
  
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline"><a href="/blog/mac-privacy-sandboxed-mac-apps-can-take-screenshots">Mac Privacy: Sandboxed Mac apps can record your screen at any time without you knowing</a></h1>
        <p class="post-meta">
          <time datetime="2018-02-10T00:00:00+00:00" itemprop="datePublished">
            
            Feb 10, 2018
          </time>
          </p>
      </header>

      <div class="post-content" itemprop="articleBody">
        <h2 id="facts">Facts</h2>

<p>Any Mac app, sandboxed or not sandboxed can:</p>

<ul>
  <li>Take screenshots of your Mac silently without you knowing</li>
  <li>Access every pixel, even if the Mac app is in the background</li>
  <li>Use basic <a href="https://en.wikipedia.org/wiki/Optical_character_recognition">OCR software</a> to read the text on the screen</li>
  <li>Access all connected monitors</li>
</ul>

<h2 id="whats-the-worst-that-could-happen">What’s the worst that could happen?</h2>

<ul>
  <li>Read password and keys from password managers</li>
  <li>Detect what web services you use (e.g. email provider)</li>
  <li>Read all emails and messages you open on your Mac</li>
  <li>When a developer is targeted, this allows the attacker to potentially access sensitive source code, API keys or similar data</li>
  <li>Learn personal information about the user, like their bank details, salary, address, etc.</li>
</ul>

<p><a href="/assets/posts/mac-take-screenshots.png" target="_blank">
  <img src="/assets/posts/mac-take-screenshots.png" />
</a></p>

<h2 id="disclaimer">Disclaimer</h2>

<p>This project is a proof of concept and should not be used in production. The goal is to highlight a privacy loophole that can be abused by Mac apps.</p>

<h2 id="how-can-i-protect-myself-as-a-user">How can I protect myself as a user?</h2>

<p>To my knowledge there is no way to protect yourself as of now.</p>

<h2 id="proposal">Proposal</h2>

<p>There are lots of valid use-cases for Mac apps to record the screen, e.g. <a href="https://support.1password.com/one-time-passwords/">1Password 2fA support</a>, screen recording software or even simple screen sharing via your web browser or Skype. However there must be some kind of control:</p>

<ul>
  <li>The App Store review process could verify the Sandbox entitlements for accessing the screen</li>
  <li>Put the user in charge with a permission dialog</li>
  <li>Additionally the user should be notified whenever an app accesses the screen.</li>
</ul>

<p>Of course, I also <a href="https://openradar.appspot.com/radar?id=5610698700750848">filed a radar</a> (rdar://37423927) to notify Apple about this issue.</p>

<h2 id="how-does-it-work">How does it work?</h2>

<p>A developer just needs to use <code class="highlighter-rouge">CGWindowListCreateImage</code> to generate a capture of the complete screen within an instant:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">CGImageRef</span> <span class="n">screenshot</span> <span class="o">=</span> <span class="no">CGWindowListCreateImage</span><span class="p">(</span>
  <span class="no">CGRectInfinite</span><span class="p">,</span> 
  <span class="n">kCGWindowListOptionOnScreenOnly</span><span class="p">,</span> 
  <span class="n">kCGNullWindowID</span><span class="p">,</span> 
  <span class="n">kCGWindowImageDefault</span><span class="p">);</span>

<span class="no">NSBitmapImageRep</span> <span class="o">*</span><span class="n">bitmapRep</span> <span class="o">=</span> <span class="p">[[</span><span class="no">NSBitmapImageRep</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">initWithCGImage</span><span class="ss">:screenshot</span><span class="p">];</span>
</code></pre></div></div>

<p>In my experiments, I piped the generated image over to a <a href="https://en.wikipedia.org/wiki/Optical_character_recognition">OCR library</a> and was able to get all text that was rendered on the user’s machine.</p>


        <p style="margin-top: 30px" class="side-projects-note">
  <small>Unless otherwise mentioned in the post, those projects are side projects which I work on on weekends and evenings, and are not affiliated with my work or employer.</small>
</p>

      </div>

      <p class="extra-info">
        
          Tags: mac, screenshot, privacy &nbsp; | &nbsp; 
        
        <a href="https://github.com/KrauseFx/krausefx.com/edit/master/_posts/2018-02-10-mac-privacy-sandboxed-mac-apps-can-take-screenshots.md" target="_blank" class="forkButton">
  <svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
 
  Fork on GitHub
</a>
      </p>
    </article>
  
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline"><a href="/blog/introducing-overkill-dont-let-itunes-interrupt-your-workflow">Introducing Overkill - Don&#39;t let iTunes interrupt your workflow</a></h1>
        <p class="post-meta">
          <time datetime="2017-12-12T00:00:00+00:00" itemprop="datePublished">
            
            Dec 12, 2017
          </time>
          </p>
      </header>

      <div class="post-content" itemprop="articleBody">
        <p>Exactly one year after the initial launch of Overkill as a shell script, after being <a href="https://www.producthunt.com/posts/overkill">#1 on ProductHunt</a>, I’m extremely excited to announce that <strong>Overkill is now a native Mac app</strong>.</p>

<p>Did iTunes ever launch without you opening it? Use Overkill to instantly kill the iTunes process once it opened itself, so your workflow isn’t interrupted.</p>

<p style="color: #888; margin-left: 20px">But Felix, you can use the check box to not launch iTunes when you connect your phone!</p>

<p>Yes, that is correct, but connecting a device to your Mac is only one of the many reasons when iTunes can’t wait to spread joy:</p>

<ul>
  <li>You click the play/pause key while listening to a web-based music player (e.g. SoundCloud, YouTube)</li>
  <li>Someone sent you a link to an iOS app</li>
  <li>You click on a link on the web, and didn’t expect it to be a Music link</li>
  <li>You updated iTunes</li>
  <li>You launch iTunes by clicking on the icon by mistake</li>
  <li>You open a video/music file in Finder, and forgot to change the default app to VLC</li>
  <li>You connect Bluetooth headphones</li>
</ul>

<h3 id="before-overkill">Before Overkill</h3>

<div class="video">
  <figure>
    <iframe width="670" height="400" src="//www.youtube.com/embed/4kn-HefqjXE" frameborder="0" allowfullscreen=""></iframe>
  </figure>
</div>

<p>As you can see in the video above, iTunes would launch while you’re typing something, stealing the window focus, and making this sound we all love to hear.</p>

<h3 id="with-overkill">With Overkill</h3>

<div class="video">
  <figure>
    <iframe width="670" height="400" src="//www.youtube.com/embed/Uk2oEKMC2_k" frameborder="0" allowfullscreen=""></iframe>
  </figure>
</div>

<p>With Overkill, you connect your iPhone to charge it, and you can still use your Mac.</p>

<h2 id="introducing-overkill-for-mac">Introducing Overkill for Mac</h2>

<p>Overkill is a simple, elegant Mac app, that runs in the background and makes sure iTunes never interrupts your work. 
And for those movie nights where you actually want to use iTunes, just click on <code class="highlighter-rouge">Pause Overkill</code> and enjoy the evening.</p>

<p><img src="/assets/posts/overkill.png" /></p>

<p>If you have other apps you don’t want to launch automatically (e.g. Photos app), you can add those apps to the Overkill list as well.</p>

<p>No installation required, just download Overkill from the link below, double click the Overkill icon, and you’re good to go!</p>

<h3 style="text-align: center; font-size: 35px; margin-bottom: 50px">
  <a href="https://github.com/KrauseFx/overkill-for-mac/releases/download/1.0/Overkill.zip" target="_blank" style="color: #60A74E !important; text-decoration: underline;">
    Download Overkill Mac App
  </a>
</h3>

<p>Unfortunately I couldn’t submit Overkill to the Mac App Store, as the sandboxing doesn’t allow the termination of other processes.</p>

<h2 id="features">Features</h2>

<ul>
  <li>Runs silently in the background, and kills iTunes</li>
  <li>Easily pause Overkill if you want to use iTunes</li>
  <li>Support for both Dark and Light mode of the menu bar</li>
  <li>Supports auto start</li>
  <li>Supports any Mac app, e.g. add the Photos app to be killed also</li>
  <li>No CPU usage, no polling, no analytics, just 300 lines of native Mac code</li>
</ul>

<p>Additionally, as most of the project I work on, Overkill is 100% open source under the MIT license:</p>

<h3 style="text-align: center; font-size: 30px; margin-top: 0px">
  <a href="https://github.com/KrauseFx/overkill-for-mac" target="_blank" style="text-decoration: underline;">
    Open on GitHub
  </a>
</h3>



        <p style="margin-top: 30px" class="side-projects-note">
  <small>Unless otherwise mentioned in the post, those projects are side projects which I work on on weekends and evenings, and are not affiliated with my work or employer.</small>
</p>

      </div>

      <p class="extra-info">
        
          Tags: itunes, overkill &nbsp; | &nbsp; 
        
        <a href="https://github.com/KrauseFx/krausefx.com/edit/master/_posts/2017-12-12-introducing-overkill-dont-let-itunes-interrupt-your-workflow.md" target="_blank" class="forkButton">
  <svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
 
  Fork on GitHub
</a>
      </p>
    </article>
  
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline"><a href="/blog/introducing-major-key-easily-jot-down-quick-notes">Introducing Major Key - Easily jot down quick notes</a></h1>
        <p class="post-meta">
          <time datetime="2017-11-26T00:00:00+00:00" itemprop="datePublished">
            
            Nov 26, 2017
          </time>
          </p>
      </header>

      <div class="post-content" itemprop="articleBody">
        <p><img src="/assets/posts/MajorKey.png" width="300" align="right" id="majorkeyscreenshot" /></p>

<p>How often are you on the run, or hanging out with friends, only to suddenly think of this really important thing you need to do when you’re back home or back at work?</p>

<p>You want to jot down that thought as quickly as possible so you don’t forget, and you want to be reminded whenever you’re back on your computer.</p>

<h2 id="introducing-major-key-the-best-key">Introducing Major Key, the best key</h2>

<p>With far less than 100 lines of Swift code, this simple app does all you need:</p>

<ul>
  <li>Unlock phone</li>
  <li>Launch Major Key 🔑</li>
  <li>Type the note</li>
  <li>Confirm</li>
</ul>

<p>Within a second you’ll have the note in your email inbox. Extremely useful if you follow the inbox zero approach. All with no waiting times or animations.</p>

<p>Launch the app, write down a note, hit the 🔑 button and immediately have the note in your inbox.</p>

<div class="video" style="float: left; margin-right: 40px">
  <figure>
    <iframe width="193" height="418" src="//www.youtube.com/embed/dOm5H5a8fbY" frameborder="0" allowfullscreen=""></iframe>
  </figure>
</div>

<h2 id="why-a-new-app">Why a new app?</h2>

<ul>
  <li>Using any kind of <strong>Notes app</strong> works rather nicely, however involves overhead, and chances are you forget on checking the notes app when you’re back on your Mac.</li>
  <li>Sending yourself an <strong>email</strong> with any email client involves extra work, as you need to start typing your email, and you get to see your inbox (<a href="https://techcrunch.com/2014/12/17/compose-is-a-distraction-free-email-app-that-only-lets-you-write-messages/">similar idea</a>)</li>
  <li>The <strong>IFTTT Notes app</strong> was perfect, however it was discontinued, and the <strong>new IFTTT</strong> app causes problems on the iPhone X due to abusing Web Clips to make it work.</li>
</ul>

<p>🔑 Major Key is not available in the App Store, but is open source, and super easy to install if you’re a developer. If interest is there, I could also publish the app to the store.</p>

<p><br />
<br />
<br /></p>

<h3 style="text-align: center; font-size: 40px; margin-top: 40px; margin-bottom: 20px">
  <a href="https://github.com/KrauseFx/majorkey" target="_blank" style="text-decoration: underline;">
    Open on GitHub
  </a>
</h3>

<style type="text/css">
  @media screen and (max-width: 600px) {
    #majorkeyscreenshot {
      width: 100%;
    }
  }
</style>



        <p style="margin-top: 30px" class="side-projects-note">
  <small>Unless otherwise mentioned in the post, those projects are side projects which I work on on weekends and evenings, and are not affiliated with my work or employer.</small>
</p>

      </div>

      <p class="extra-info">
        
          Tags: notes, ifttt &nbsp; | &nbsp; 
        
        <a href="https://github.com/KrauseFx/krausefx.com/edit/master/_posts/2017-11-26-introducing-major-key-easily-jot-down-quick-notes.md" target="_blank" class="forkButton">
  <svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
 
  Fork on GitHub
</a>
      </p>
    </article>
  
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline"><a href="/blog/ios-privacy-watchuser-access-both-iphone-cameras-any-time-your-app-is-running">iOS Privacy: watch.user - Access both iPhone cameras any time your app is running</a></h1>
        <p class="post-meta">
          <time datetime="2017-10-25T00:00:00+00:00" itemprop="datePublished">
            
            Oct 25, 2017
          </time>
          </p>
      </header>

      <div class="post-content" itemprop="articleBody">
        <h1 id="facts">Facts</h1>

<p>Once you grant an app access to your camera, it can</p>

<ul>
  <li>access both the front and the back camera</li>
  <li>record you at any time the app is in the foreground</li>
  <li>take pictures and videos without telling you</li>
  <li>upload the pictures/videos it takes immediately</li>
  <li>run real-time face recognition to detect facial features or expressions</li>
</ul>

<p>Have you ever used a social media app while using the bathroom? 🚽</p>

<p>All without indicating that your phone is recording you and your surrounding, no LEDs, no light or any other kind of indication.</p>

<h2 id="disclaimer">Disclaimer</h2>

<p>This project is a proof of concept and should not be used in production. The goal is to highlight a privacy loophole that can be abused by iOS apps.</p>

<h2 id="what-can-an-ios-app-do">What can an iOS app do?</h2>

<p>iOS users often grant camera access to an app soon after they download it (e.g. to add an avatar or send a photo). These apps, like a messaging app or any news-feed-based app, can easily track the users face, take pictures, or live stream the front and back camera, without the user’s consent.</p>

<ul>
  <li>Get full access to the front and back camera of an iPhone/iPad any time your app is running in the foreground</li>
  <li>Use the front and the back camera to know what your user is doing right now and where the user is located based on image data</li>
  <li>Upload random frames of the video stream to your web service, and run a proper face recognition software, which enables you to
    <ul>
      <li>Find existing photos of the person on the internet</li>
      <li>Learn how the user looks like and create a 3d model of the user’s face</li>
    </ul>
  </li>
  <li>Live stream their camera onto the internet (e.g. while they sit on the toilet), with the recent innovation around faster internet connections, faster processors and more efficient video codecs it’s hard to detect for the average user</li>
  <li>Estimate the mood of the user based on what you show in your app (e.g. news feed of your app)</li>
  <li>Detect if the user is on their phone alone, or watching together with a second person</li>
  <li>Recording stunning video material from bathrooms around the world, using both the front and the back camera, while the user scrolls through a social feed or plays a game</li>
  <li>Using the new built-in iOS 11 Vision framework, every developer can very easily parse facial features in real-time like the eyes, mouth, and the face frame</li>
</ul>

<h2 id="how-can-i-protect-myself-as-a-user">How can I protect myself as a user?</h2>

<p>There are only a few things you can do:</p>

<ul>
  <li>The only real safe way to protect yourself is using camera covers: There is many different covers available, find one that looks nice for you, or use a sticky note (<a href="https://www.amazon.com/Original-Webcam-Cover-directly-Manufacturer/dp/B01LWS2X8I">for example</a>).</li>
  <li>You can revoke camera access for all apps, always use the built-in camera app, and use the image picker of each app to select the photo (which will cause you to run into a problem I described with <a href="https://github.com/krausefx/detect.location">detect.location</a>).</li>
  <li>To avoid this as well, the best way is to use Copy &amp; Paste to paste the screenshot into your messaging application. If an app has no copy &amp; paste support, you’ll have to either expose your image library, or your camera.</li>
</ul>

<p>It’s interesting that many people cover their camera, <a href="https://www.nytimes.com/2016/06/23/technology/personaltech/mark-zuckerberg-covers-his-laptop-camera-you-should-consider-it-too.html">including Mark Zuckerberg</a>.</p>

<h2 id="proposal">Proposal</h2>

<p>How can the root of the problem be fixed, so we don’t have to use camera covers?</p>

<ul>
  <li>Offer a way to grant temporary access to the camera (e.g. to take and share one picture with a friend on a messaging app), related to <a href="https://github.com/krausefx/detect.location">detect.location</a>.</li>
  <li>Show an icon in the status bar that the camera is active, and force the status bar to be visible whenever an app accesses the camera</li>
  <li>Add an LED to the iPhone’s camera (both sides) that can’t be worked around by sandboxed apps, which is the elegant solution that the MacBook uses</li>
</ul>

<p>I reported the issue to Apple with <a href="https://openradar.appspot.com/radar?id=5007947352506368">rdar://35116272</a>.</p>

<div class="video" style="width: 250px; float: right;margin: 20px">
  <figure>
    <iframe width="240" height="400" src="//www.youtube.com/embed/GqWUaflPMh0" frameborder="0" allowfullscreen=""></iframe>
  </figure>
</div>

<h2 id="about-the-demo">About the demo</h2>

<p>I didn’t submit the demo to the App Store; however, you can very easily <a href="https://github.com/KrauseFx/watch.user">clone the repo</a> and run it on your own device.</p>

<ul>
  <li>You first have to take a picture that gets “posted” on the fake “social network” in the app
    <ul>
      <li>At this point, you’ve granted full access to both of your cameras every time the app is running</li>
    </ul>
  </li>
  <li>You browse through a news feed</li>
  <li>After a bit of scrolling, you’ll suddenly see pictures of yourself, taken a few seconds ago while you scrolled through the feed</li>
  <li>You realize you’ve been recorded the whole time, and with it, the app ran a face recognition algorithm to detect facial features.</li>
</ul>

<p>You might say</p>

<blockquote>
  <p>Oh, obviously, I never grant camera permissions!</p>
</blockquote>

<p><img src="/assets/posts/watch-user-screenshot.jpg" style="width: 250px; float: right; border: 2px solid #BBB; margin: 10px" /></p>

<p>However, if you’re using a messaging service, like Messenger, WhatsApp, Telegram or anything else, chances are high you already granted permission to access both your image library (see <a href="https://github.com/KrauseFx/detect.location">detect.location</a>) and your camera. You can check which apps have access to your cameras and photo library by going to Settings &gt; Privacy.</p>

<p>The full source code is available <a href="https://github.com/KrauseFx/watch.user">on GitHub</a>.</p>

<h3 id="how-does-the-demo-app-get-access-to-the-camera">How does the demo app get access to the camera?</h3>

<p>Once you take and post one picture or video via a social network app, you grant full access to the camera, and any time the app is running, the app can use the camera.</p>

<h3 id="whats-the-screenshot-on-the-right">What’s the screenshot on the right</h3>

<p>As part of iOS 11, there is now an easy to use Vision framework, that allows developers to easily track faces. The screenshot shows that it’s possible to get some basic emotions right, so I wrote a very basic mapping of a user’s face to the corresponding emoji as a proof of concept. You can see the highlighted facial features, and the detected emoji at the bottom.</p>

<h2 id="similar-projects-ive-worked-on">Similar projects I’ve worked on </h2>

<ul>
  <li><a href="https://github.com/KrauseFx/whats-the-user-doing">what’s the user doing</a>: Raising awareness of what you can do with a smartphones gyro sensors in web browsers</li>
  <li><a href="https://github.com/krausefx/detect.location">detect.location</a>: An easy way to access the user’s iOS location data without actually having access</li>
  <li><a href="https://github.com/krausefx/steal.password">steal.password</a>: Easily get the user’s Apple ID password, just by asking</li>
</ul>

<p>Special thanks to <a href="https://twitter.com/khanlou">Soroush</a>, who came up with the initial idea for this write-up.</p>

<h3 style="text-align: center; font-size: 40px; margin-top: 40px">
  <a href="https://github.com/KrauseFx/watch.user" target="_blank" style="text-decoration: underline;">
    Open on GitHub
  </a>
</h3>


        <p style="margin-top: 30px" class="side-projects-note">
  <small>Unless otherwise mentioned in the post, those projects are side projects which I work on on weekends and evenings, and are not affiliated with my work or employer.</small>
</p>

      </div>

      <p class="extra-info">
        
          Tags: ios, privacy, phishing, camera, video &nbsp; | &nbsp; 
        
        <a href="https://github.com/KrauseFx/krausefx.com/edit/master/_posts/2017-10-25-ios-privacy-watchuser-access-both-iphone-cameras-any-time-your-app-is-running.md" target="_blank" class="forkButton">
  <svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
 
  Fork on GitHub
</a>
      </p>
    </article>
  

  <!-- Pagination links -->
  <div class="pagination">
    
      <a href="/" class="previous">Newer</a>
    
    /
    
      <a href="/blog/page3/" class="next">Older</a>
    
  </div>

</div>

      </div>
    </main>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          <li>
            <a href="https://github.com/KrauseFx" target="_blank"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">KrauseFx</span></a>

          </li>
          <li>
            <a href="https://twitter.com/KrauseFx" target="_blank"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">KrauseFx</span></a>

          </li>
        </ul>
      </div>
      <div class="footer-col footer-col-2"></div>
      <div class="footer-col footer-col-3">
        <p class="subscribe-newsletter">
  Want to be the first to hear about more privacy and mobile related essays?
</p>

<form class="subscribe-form" action="https://krausefx.us10.list-manage.com/subscribe/post?u=a84ca3495977afb89bf2b98fb&amp;id=d9610c8987" method="post" target="popupwindow" onsubmit="window.open('https://krausefx.us10.list-manage.com/subscribe/post?u=a84ca3495977afb89bf2b98fb', 'popupwindow', 'scrollbars=yes,width=600,height=620');return true">
  <label for="tlemail"></label>
  <input type="text" placeholder="Email Address" name="EMAIL" id="tlemail">
  <input type="hidden" value="1" name="embed">
  <button type="submit" name="subscribe">
    Subscribe
  </button>
</form>

      </div>
    </div>

  </div>
</footer>

<script type="text/javascript">
  var links = document.links;
  for (var i = 0, linksLength = links.length; i < linksLength; i++) {
    if (links[i].hostname != window.location.hostname) {
      links[i].target = '_blank';
    } 
  }
</script>


  </body>

</html>
